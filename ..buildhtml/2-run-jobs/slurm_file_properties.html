
<!DOCTYPE html>


<html lang="tr" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-04-18T17:32:44+03:00" />
    <title>SLURM Betik Özellikleri &#8212; TRUBA Kullanıcı Dokümanları</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/site_theme.css?v=80a908aa" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=a88cc430" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=fef41d8b"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/translations.js?v=34f4c3a9"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '2-run-jobs/slurm_file_properties';</script>
    <link rel="index" title="Dizin" href="../genindex.html" />
    <link rel="search" title="Ara" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="tr"/>
    <meta name="docbuild:last-update" content="18 Nis 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/TRUBA_doc-footer.png" class="logo__image only-light" alt="TRUBA Kullanıcı Dokümanları - Home"/>
    <script>document.write(`<img src="../_static/TRUBA_doc-footer.png" class="logo__image only-dark" alt="TRUBA Kullanıcı Dokümanları - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Ara" aria-label="Ara" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Ara</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    TRUBA (Türk Ulusal Bilim e-Altyapısı)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">İçerikler</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../0-first-steps/index.html">İlk Adımlar</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/kullanici-portali/index.html">TRUBA Üyelik ve Kaynak Başvuru Rehberi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/open-vpn/openvpn_info.html">OpenVPN Bağlantısı</a></li>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/MobaXterm.html">Windows’da MobaXterm Kurulumu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/arf-baglanti.html">ARF Kullanıcı Arayüzüne Bağlantı</a></li>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/openondemand/index.html">Open OnDemand Arayüzü</a></li>


<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/arf-acc-baglanti.html">ARF-ACC Kullanıcı Arayüzüne Bağlantı</a></li>
<li class="toctree-l2"><a class="reference internal" href="../0-first-steps/TRUBA-arf-gecis-rehberi.html">TRUBA Kümesinden ARF Kümesine Geçiş Rehberi</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../1-hardware/index.html">Sistem Bilgileri</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../1-hardware/arf-genel-bilgileri.html">ARF Kümesi Hakkında Genel Bilgiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-hardware/hesaplamakumeleri.html">Hesaplama Kümeleri</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1-hardware/yuksek-performansli-dosya-sistemleri.html">Yüksek Performanslı Dosya Sistemleri</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index.html">İş Çalıştırma</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="genel_kurulum/index.html">TRUBA’da Uygulama/Kütüphane Kurulumu</a></li>
<li class="toctree-l2"><a class="reference internal" href="interaktif_is_calistirma.html">İnteraktif İş Çalıştırma</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications/index.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="GPU/index.html">GPU Kılavuzu</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../3-user-support/index.html">Kullanıcı Desteği</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4-access-calls/index.html">EUROHPC ve Erişim Çağrıları</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Bu sayfayı indirin">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/2-run-jobs/slurm_file_properties.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Kaynak dosyayı indirin"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="PDF olarak yazdır"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Tam ekran modu"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Ara" aria-label="Ara" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>SLURM Betik Özellikleri</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> İçindekiler </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#baslangic-bolumu">1- Başlangıç Bölümü</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#govde">2- Gövde</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#isin-baslamasi-ve-bitisi">3- İşin Başlaması ve Bitişi</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="slurm-betik-ozellikleri">
<span id="slurm-betik"></span><h1>SLURM Betik Özellikleri<a class="headerlink" href="#slurm-betik-ozellikleri" title="Link to this heading">#</a></h1>
<p>Kabuk programlamadan bağımsız olarak, herhangi bir SLURM betik temel olarak üç ana bölümden oluşur. Başlangıç (parametreler, tanımlar), gövde ve iş başlatma/çıkış bölümleri.</p>
<section id="baslangic-bolumu">
<h2>1- Başlangıç Bölümü<a class="headerlink" href="#baslangic-bolumu" title="Link to this heading">#</a></h2>
<p>Bu bölüm, hesaplama sırasında kullanılacak hesabın adı  ve işin çalışacağı yer, zaman sınırı, çekirdek ve node sayısı gibi temel özellikleri içerir. Her tanım satırı <strong>#SBATCH</strong> ile başlamalıdır. Bu bölümde işin akışını belirleyecek pek çok tanım yapılabileceği gibi, temel birkaç tanımın yapılması işin çalışması için yeterlidir.
Bu tanımların bir kısmı betik dosyasının içerisinde yapılabileceği gibi, bir kısmı <strong>sbatch</strong> komutu ile dosya kuyruğa gönderilirken komutun yanına parametre olarak da eklenerek kullanılabilir. Örnegin:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch<span class="w"> </span>-N<span class="w"> </span><span class="m">4</span><span class="w"> </span>-n<span class="w"> </span><span class="m">16</span><span class="w"> </span>iş_dosyasının_adı
</pre></div>
</div>
<p>Aşağıda Slurm betik için verilen komutların ne oldukları verilmiştir. Siz de aşağıdaki komutları kullanarak kendi betiğinizi oluşturabilirsiniz.</p>
<div class="admonition warning">
<p class="admonition-title">Uyarı</p>
<p><strong>#!/bin/bash</strong>  Betiği yorumlayacak kısımdır (interpreter). Sayfanın başında bu şekilde kalması gerekir.</p>
</div>
<p><strong>#SBATCH -p</strong> = İşin çalıştırılacağı kuyruk adını tanımlar (partition).</p>
<p><strong>#SBATCH -A</strong> = İş için kullanılacak TRUBA hesap ismi. Grup halinde yapılan çalışmalarda kullanıcı adından farklı olabilir. ARDEB kanalı ile açılan TBAG proje hesaplarına ayrıcalıklı olarak iş göndermek için, bu kısma ilgili (ve kullanıcı hesabınız için izin verilen) <code class="docutils literal notranslate"><span class="pre">tbag</span></code> hesabının yazılması gerekir.</p>
<p><strong>#SBATCH -J</strong> = İşin kuyrukta görülecek adı.</p>
<p><strong>#SBATCH -n</strong> = Görev sayısı (mpi işleri için, uygulamanın çalıştırılacağı kopya sayısı). Normalde sbatch herhangi bir görev çalıştırmaz. İş, çalışacağı sunucuya düşer ve master nodda çalışmaya başladığında, betik linux komut satırından çalıştırılmış gibi davranır. Betikte işin çalıştırılacağı komut satırında özel bir durum belirtilmemişse işin tek kopyası çalıştırılır. Ancak satırda <strong>mpirun</strong> ya da <strong>mpiexec</strong> komutları kullanılmışsa, ilgili uygulamanın -n kopyası çalıştırılır.</p>
<p><strong>#SBATCH -c</strong> = Her bir görev için kullanılabilecek en fazla çekirdek sayısını belirtir (cores per task). Varsayılan değeri 1’dir. Eğer hibrit işler (mpi+openmp) ya da multitask (openmp sadece) çalıştırılacaksa, bu parametrenin kullanılması gerekir. Değeri <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> değişkeninin değeri ile aynı olacak şekilde seçilmelidir. Değeri bir sunucudaki çekirdek sayısından fazla olamaz. Eğer aynı sunucusu üzerinden 1’den fazla task (n) çalıştırılacaksa, <strong>sunucu başına düşen görev sayısı x görev başına düşen çekirdek miktarı</strong> en fazla ilgili sunucudaki çekirdek sayısı kadar olabilir. Örneğin 28 çekirdekli 2 adet sunucunun tamamı  kullanılarak iş gönderilecekse, 8 processli (task) bir MPI+openmp hibrid iş çalıştırılacaksa, process başına en fazla 7 çekirdek kullanılabilir. (sunucu başına 4 process düşer, sunucuda toplam 28 çekirdek varsa, her bir process için en fazla 7 çekirdek kullanılabilir)</p>
<p><strong>#SBATCH –threads</strong> = İşlemcilerin hyperthreading özelliklerini kullanmak için tanımlanır. Mevcut işlemcilerde çekirdek başına 2 thread düşmektedir. Örnegin 28 çekirdekli bir sunucuda, bir openmp işini 56 thread ile (OMP_NUM_THREADS=56) çalıştırabilmek için aşağıdaki komut satırı kullanılabilir.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-N<span class="w"> </span><span class="m">1</span><span class="w"> </span>-n1<span class="w"> </span>-c28<span class="w"> </span>--threads<span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
<p><strong>#SBATCH –mem=</strong> Bu parametre ile iş için en fazla ne kadar bellek kullanılacağı betimlenir. Kullanımı zorunlu değildir. Eğer bu parametre kullanılmazsa, her bir çekirdek için <strong>DefMemPerCore</strong> kadar bellek ayrılır. Daha fazla belleğe ihtiyaç duyulması durumunda, bu parametre ile ihtiyaç duyulan bellek miktarı arttırılabilir. Ancak bu değer en fazla <strong>çekirdek sayısı x MaxMemPerCore</strong> kadar arttırılabilir.</p>
<p><strong>#SBATCH –mem-per-core=</strong> Bu parametre ile her bir çekirdek için ihtiyaç duyulan bellek miktarı belirtilir. Kullanımı zorunlu değildir. Eğer bu parametre kullanılmazsa, her bir çekirdek için <strong>DefMemPerCore</strong> kadar bellek ayrılır. Daha fazla belleğe ihtiyaç duyulması durumunda, bu parametre ile ihtiyaç duyulan bellek miktarı arttırılabilir. Ancak bu değer en fazla <strong>MaxMemPerCore</strong> kadar olabilir.</p>
<p><strong>#SBATCH –time=</strong> İşin toplam çalışma süresini gösterir. Bu süre zarfında tamamlanmamış olan işler, zaman dolduğunda otomatik olarak ölürler. Burada verilecek değer ilgili kümenin sınırından yüksek olamaz.</p>
<div class="admonition warning">
<p class="admonition-title">Uyarı</p>
<p>Herhangi bir değer verilmeden gönderilen işler, çalışmaya başladıktan bir dakika sonra sistem tarafından otomatik olarak sonlandırılırlar.</p>
</div>
<p><strong>#SBATCH –no-requeue=</strong> İş çalışırken bazı durumlarda, hesaplama sunucusundan kaynaklı sebeplerle, iş hata alarak sonlanabilir. Bu durumda iş kuyruğa otomatik olarak yeniden gönderilebilir. İşin kuyruğa yeniden gönderilmesi genelde faydalı bir özelliktir. Ancak eğer iş kaldığı yerden devam edecek şekilde yapılandırılmamışsa ya da kullanılan uygulamanın böyle bir özelliği yoksa hatta o ana kadar üretilen tüm verilerin üzerine yeni verilerin yazılma ihtimali varsa, bu opsiyonu kullanmak yerine işi yeniden kuyruğa göndermek daha mantıklı bir çözümdür.</p>
<p><strong>#SBATCH –output=</strong> İş çalışırken, kullandığınız uygulamanın sonuçları için ya da betiğinizde kullandığınız bash programı öğelerinin ekrana basılacağı (STDOUT) bilgilerin yazılacağı dosyanın tam adresini ve adını verdiğiniz komuttur. Bu adresin scratch dizinde olması zorunludur.</p>
<p><strong>#SBATCH –error=</strong> İş çalışırken, kullandığınız uygulama ile ilgili hataların ya da betiğinizde kullandığınız bash programla öğelerinin ekrana basılacağı hata mesajlarının (STDERR) yazılacağı dosyanın tam adresi ve adını tanımlamak için kullanılan komuttur. Bu adresin scratch dizinde olması zorunludur.</p>
<div class="admonition warning">
<p class="admonition-title">Uyarı</p>
<p>Eğer <code class="docutils literal notranslate"><span class="pre">--error</span></code> ve <code class="docutils literal notranslate"><span class="pre">--output</span></code> parametrelerini  belirtilmezseniz, tüm ekran çıktısı otomatik olarak <strong>slurm-JOBID.out</strong> dosyasına yazdırılır.</p>
</div>
<p><strong>#SBATCH -N=</strong> Hesaplama sırasında, kullanılacak çekirdeklerin kaç farklı node tarafından sağlanacağını belirler. Herhangi bir tanım girilmemişse, çekirdekler rastgele sayıda nodelardan rastgele sayıda sağlanırlar. Node sayısı için herhangi bir tanımlama yapmamak işlerin mümkün olan en hızlı şekilde başlamasını sağlar. Ancak performans testlerinden alınacak sonuç, her iş için farklı olabilir. Eğer talep edilen çekirdeklerin nodelar tarafından eşit sayıda sağlanması istenmiyorsa, <strong>-N</strong> parametresi yerine <strong>–ntasks-per-node</strong> ve <strong>-N</strong> parametreleri birlikte kullanılmalıdır. Örneğin işiniz için toplamda 16 çekirdeğin 4 sunucu tarafından eşit sayıda sağlanmasını istiyorsanız betiğinize aşağıdakileri eklemelisiniz.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -N 4</span>
<span class="c1">#SBATCH --ntasks-per-node=4</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Uyarı</p>
<p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span></code> parametresi openmpi-1.6.5 sürümü ile düzgün çalışmamaktadır. O nedenle eşit çekirdek sayısının elzem olduğu durumlarda en az openmpi-1.8.8 sürümü kullanılmalıdır. Bu parametre impi ve diğer mpi sürümleri ile kontrol edilmemiştir.</p>
</div>
<p><strong>#SBATCH -M=</strong> Birden fazla hesaplama kümesinde tek bir arayüz üzerinden hizmet verildiği durumlarda, işin gideceği kümeyi belirtir. TRUBA’da şu an için farklı hesaplama kümeleri farklı kullanıcı arayüzlerinden hizmet vermektedirler.</p>
<p><strong>#SBATCH –workdir=</strong> İşin başlayıp, output, error dosyalarının yazılacağı dizinin adresidir. Scratch dizini işaret ediyor olması zorunludur. Eğer herhangi bir tanımlama yapılmaz ise, iş gönderdiğiniz dizin <strong>workdir</strong> dizini olarak kabul edilir.</p>
<p><strong>#SBATCH –gres=</strong> Ekstra özelliklerin sunulduğu kuyruklarda bu ekstra özelliklerin ne kadarının kullanılacağını belirtir. Cuda kuyruğundaki GPU kartlarını kullanabilmek için bu tanımın yapılması gerekir. Örnegin:</p>
<div class="admonition warning">
<p class="admonition-title">Uyarı</p>
<p>#SBATCH –gres=gpu:1</p>
</div>
<p><strong>#SBATCH –mail-type=</strong> İş kuyruğa gönderildikten sonra, iş ile ilgili ne tür e-postaların gönderileceğini tanımlar. BEGIN, END, FAIL, REQUEUE, ALL değerlerini alabilir. Herhangi bir tanım yapılmaz ise kullanıcı e-posta ile bilgilendirilmez.</p>
<p><strong>#SBATCH –mail-user=</strong> Yukarıda tanımlanan durumlar için  e-postanın gönderileceği adresi tanımlar.</p>
</section>
<section id="govde">
<h2>2- Gövde<a class="headerlink" href="#govde" title="Link to this heading">#</a></h2>
<p>Her program ve kullanıcı için gövde kısmı farklı olabilir. Bu kısımda işi çalıştırmadan önce yapılması gereken ön çalışma yapılır; load edilmesi gereken kütüphaneler, varsa çevre değişkenler vs. yüklenir. Kabuk dili öğeleri kullanılarak ön kontroller yapılarak gerekli dosyaların varlığı, içeriği vs. kontrol edilebilir. Bu kısım kullanıcının deneyimine ve ihtiyaçlarına göre şekillenir. Ancak standart olarak iş ile ilgili temel bilgilerin STDOUT’a yazılması daha sonra işi analiz ya da debug etmek için faydalı olabilir. Aşağıdaki kısımda örnek olarak herhangi bir LAMMPS işini çalıştırmak için ihtiyaç duyulan kütüphaneler load edilerek çevre değişkenleri ayarlanıyor.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>


<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM_NODELIST </span><span class="nv">$SLURM_NODELIST</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;NUMBER OF CORES </span><span class="nv">$SLURM_NTASKS</span><span class="s2">&quot;</span>

module<span class="w"> </span>purge

module<span class="w"> </span>load<span class="w"> </span>apps/lammps/29Aug2024_stable_oneapi-2024
</pre></div>
</div>
</section>
<section id="isin-baslamasi-ve-bitisi">
<h2>3- İşin Başlaması ve Bitişi<a class="headerlink" href="#isin-baslamasi-ve-bitisi" title="Link to this heading">#</a></h2>
<p>Gövde kısmında programın çalıştırılması için gerekli kütüphaneler, çevre değişkenleri load edildikten ve gerekli kontroller yapıldıktan sonra, iş çalıştırılması için gerekli komutlar girilir. İş çalıştırma satırı, normalde işi komut satırından elle çalıştırırken kullanılan komut satırı ile aynıdır. Herhangi bir LAMMPS işi işin bu satır aşağıdaki gibi olmalıdır.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$LAMMPS_DIR</span>/lmp<span class="w">  </span>&lt;<span class="w"> </span><span class="k">in</span>.lammpsinputfile<span class="w"> </span>&gt;<span class="w"> </span>lammps-outputfile.out
<span class="nb">exit</span>
</pre></div>
</div>
<p>MPI işler için SLURM’un sağladığı bazı esneklikler ve kullanım kuralları vardır. Hesaplama sırasında kullanılacak çekirdek sayısı ve host bilgisi yazılmasına OpenMPI gibi uygulamalar için (ve diğer bazı MPI kütüphanelerinde) gerek yoktur. Bu bilgi mpirun komutuna doğrudan kaynak yöneticisi tarafından sağlanır. Verilen örnekte komut satırından bir MPI işini 4 çekirdek ile çalıştırmak için normalde aşağıdaki komut satırı yazılması gerekirken</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>–machinefile<span class="o">=</span>hosts_dosyasi<span class="w"> </span>&lt;uygulamanin_tam_adresi_ve_adi&gt;
<span class="nb">exit</span>
</pre></div>
</div>
<p>SLURM betik için aşağıdaki satır kullanılmalıdır.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>&lt;uygulamanın_tam_adresi_ve_adı&gt;
<span class="nb">exit</span>
</pre></div>
</div>
<p>Eğer işin o ana kadar kullanmış olduğu sistem kaynakları (bellek, walltime, runtime, disk vb.) hakkında detaylı bilgi almak isterseniz <code class="docutils literal notranslate"><span class="pre">exit</span></code> satırından önce aşağıdaki komutu girebilirsiniz.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sstat<span class="w"> </span>-j<span class="w"> </span><span class="nv">$SLURM_JOB_ID</span>
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> İçindekiler
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#baslangic-bolumu">1- Başlangıç Bölümü</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#govde">2- Gövde</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#isin-baslamasi-ve-bitisi">3- İşin Başlaması ve Bitişi</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Tarafından TÜBİTAK ULAKBİM
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2021, TÜBİTAK ULAKBİM.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Son güncelleme: 18 Nis 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <div class="footer-extra" style="text-align: center; margin-top: 20px;">
    <table style="margin: 0 auto;">
        <tr>
            <td>
                <a href="https://ulakbim.tubitak.gov.tr" target="_blank" style="margin-right: 30px; display: inline-block;">
                    <img src="https://www.truba.gov.tr/wp-content/uploads/2025/02/STB-ULAKBIM_doc-footer.png" alt="TÜBİTAK ULAKBİM Web Sitesi" height="60px">
                </a>
                <a href="https://www.truba.gov.tr" target="_blank" style="margin-right: 30px; display: inline-block;">
                    <img src="https://www.truba.gov.tr/wp-content/uploads/2025/02/TRUBA_doc-footer.png" alt="TRUBA Web Sitesi" height="60px">
                </a>
                <a href="https://eurocc.truba.gov.tr/" target="_blank" style="margin-right: 30px; display: inline-block;">
                    <img src="https://www.truba.gov.tr/wp-content/uploads/2025/02/NCCTurkiye-Color.png" alt="EuroCC Türkiye Web Sitesi" height="60px">
                </a>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; padding-top: 10px;">
                <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
                    <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="CC BY-NC-SA 4.0">
                </a>
                Bu çalışma, <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons Atıf-Gayri Ticari-Aynı Lisansla Paylaş 4.0 Uluslararası Lisansı</a> ile lisanslanmıştır.
                <br><br>2025.01.01
            </td>
        </tr>
    </table>
  </div>

  </body>
</html>